
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analysis &#8212; pynbody 1.0.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Plotting" href="plot.html" />
    <link rel="prev" title="Automatically Derived Arrays" href="derived.html" />

   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

<link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
<link href="_static/customise.css" rel="stylesheet">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38063425-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-pynbody.analysis.angmom">
<span id="analysis"></span><h1>Analysis<a class="headerlink" href="#module-pynbody.analysis.angmom" title="Permalink to this headline">¶</a></h1>
<div class="section" id="angmom">
<h2>angmom<a class="headerlink" href="#angmom" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="pynbody.analysis.angmom.ang_mom_vec">
<code class="sig-prename descclassname">pynbody.analysis.angmom.</code><code class="sig-name descname">ang_mom_vec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">snap</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/angmom.html#ang_mom_vec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.angmom.ang_mom_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the angular momentum vector of the specified snapshot.</p>
<p>The return units are [mass]*[dist]*[vel] as per the units of the
snapshot.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.angmom.ang_mom_vec_units">
<code class="sig-prename descclassname">pynbody.analysis.angmom.</code><code class="sig-name descname">ang_mom_vec_units</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">snap</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/angmom.html#ang_mom_vec_units"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.angmom.ang_mom_vec_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the angular momentum vector of the specified snapshot
with correct units.
Note that the halo has to be aligned such that the disk
is in the x-y-plane and its center must be the coordinate
origin.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.angmom.spin_parameter">
<code class="sig-prename descclassname">pynbody.analysis.angmom.</code><code class="sig-name descname">spin_parameter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">snap</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/angmom.html#spin_parameter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.angmom.spin_parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the spin parameter lambda’ of a centered halo
as defined in eq. (5) of Bullock et al. 2001
(2001MNRAS.321..559B).
Note that the halo has to be aligned such that the disk
is in the x-y-plane and its center must be the coordinate
origin.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.angmom.sideon">
<code class="sig-prename descclassname">pynbody.analysis.angmom.</code><code class="sig-name descname">sideon</code><span class="sig-paren">(</span><em class="sig-param">h</em>, <em class="sig-param">vec_to_xform=&lt;function calc_sideon_matrix&gt;</em>, <em class="sig-param">cen_size='1 kpc'</em>, <em class="sig-param">disk_size='5 kpc'</em>, <em class="sig-param">cen=None</em>, <em class="sig-param">vcen=None</em>, <em class="sig-param">move_all=True</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/angmom.html#sideon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.angmom.sideon" title="Permalink to this definition">¶</a></dt>
<dd><p>Reposition and rotate the simulation containing the halo h to see
h’s disk edge on.</p>
<p>Given a simulation and a subview of that simulation (probably the
halo of interest), this routine centers the simulation and rotates
it so that the disk lies in the x-z plane. This gives a side-on
view for SPH images, for instance.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.angmom.faceon">
<code class="sig-prename descclassname">pynbody.analysis.angmom.</code><code class="sig-name descname">faceon</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">h</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/angmom.html#faceon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.angmom.faceon" title="Permalink to this definition">¶</a></dt>
<dd><p>Reposition and rotate the simulation containing the halo h to see
h’s disk face on.</p>
<p>Given a simulation and a subview of that simulation (probably the
halo of interest), this routine centers the simulation and rotates
it so that the disk lies in the x-y plane. This gives a face-on
view for SPH images, for instance.</p>
</dd></dl>

</div>
<span class="target" id="module-pynbody.analysis.cosmology"></span><div class="section" id="cosmology">
<h2>cosmology<a class="headerlink" href="#cosmology" title="Permalink to this headline">¶</a></h2>
<p>A set of functions for common cosmological calculations.</p>
<dl class="py function">
<dt id="pynbody.analysis.cosmology.hzoverh0">
<code class="sig-prename descclassname">pynbody.analysis.cosmology.</code><code class="sig-name descname">hzoverh0</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">a</span></em>, <em class="sig-param"><span class="n">omegam0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/cosmology.html#hzoverh0"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.cosmology.hzoverh0" title="Permalink to this definition">¶</a></dt>
<dd><p>returns: H(a) / H0  = [omegam/a**3 + (1-omegam)]**0.5</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.cosmology.linear_growth_factor">
<code class="sig-prename descclassname">pynbody.analysis.cosmology.</code><code class="sig-name descname">linear_growth_factor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">z</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/cosmology.html#linear_growth_factor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.cosmology.linear_growth_factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the linear growth factor b(a), normalized to 1
at z=0, for the cosmology of snapshot f.</p>
<p>The output is dimensionless. If a redshift z is
specified, it is used in place of the redshift in
output f.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.cosmology.rate_linear_growth">
<code class="sig-prename descclassname">pynbody.analysis.cosmology.</code><code class="sig-name descname">rate_linear_growth</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">z</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'h Gyr^-1'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/cosmology.html#rate_linear_growth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.cosmology.rate_linear_growth" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the linear growth rate b’(a), normalized
to 1 at z=0, for the cosmology of snapshot f.</p>
<p>The output is in ‘h Gyr^-1’ by default. If a redshift z is specified,
it is used in place of the redshift in output f.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.cosmology.age">
<code class="sig-prename descclassname">pynbody.analysis.cosmology.</code><code class="sig-name descname">age</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">z</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'Gyr'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/cosmology.html#age"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.cosmology.age" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the age of the universe in the snapshot f
by integrating the Friedmann equation.</p>
<p>The output is given in the specified units. If a redshift
z is specified, it is used in place of the redshift in the
output f.</p>
<p><strong>Input</strong>:</p>
<p><em>f</em>: SimSnap</p>
<p><strong>Optional Keywords</strong>:</p>
<p><em>z (None)</em>: desired redshift. Can be a single number, a list, or a
numpy.ndarray.</p>
<p><em>unit (‘Gyr’)</em>: desired units for age output</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.cosmology.redshift">
<code class="sig-prename descclassname">pynbody.analysis.cosmology.</code><code class="sig-name descname">redshift</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">time</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/cosmology.html#redshift"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.cosmology.redshift" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the redshift given a snapshot and a time since Big Bang
in Gyr.</p>
<p>Uses scipy.optimize.newton to do the root finding if number of
elements in the time array is less than 1000, otherwise uses a linear
interpolation.</p>
<p><strong>Input</strong>:</p>
<p><em>f</em>: SimSnap with cosmological parameters defined</p>
<dl class="simple">
<dt><em>time</em>: time since the Big Bang in Gyr for which a redshift should</dt><dd><p>be returned. float, list, or numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.cosmology.rho_crit">
<code class="sig-prename descclassname">pynbody.analysis.cosmology.</code><code class="sig-name descname">rho_crit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">z</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/cosmology.html#rho_crit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.cosmology.rho_crit" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the critical density of the universe in
the snapshot f.</p>
<p>z specifies the redshift. If z is none, the redshift of the
provided snapshot is used.</p>
<p>unit specifies the units of the returned density. If unit is None,
the returned density will be in the units of
f[“mass”].units/f[“pos”].units**3. If that unit cannot be calculated,
the returned units are Msol kpc^-3 comoving.</p>
<p>Note that you can get slightly confusing results if your
simulation is in comoving units and you specify a different
redshift z. Specifically, the physical density for the redshift
you specify is calulated, but expressed as a comoving density <em>at
the redshift of the snapshot</em>. This is intentional behaviour.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.cosmology.rho_M">
<code class="sig-prename descclassname">pynbody.analysis.cosmology.</code><code class="sig-name descname">rho_M</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">z</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/cosmology.html#rho_M"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.cosmology.rho_M" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the matter density of the universe in snapshot f.</p>
<p>unit and z are used if not None, as by rho_crit. See also the note in
rho_crit about confusion over comoving units in this case.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.cosmology.H">
<code class="sig-prename descclassname">pynbody.analysis.cosmology.</code><code class="sig-name descname">H</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/cosmology.html#H"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.cosmology.H" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the Hubble parameter of the universe in snapshot f</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.cosmology.add_hubble">
<code class="sig-prename descclassname">pynbody.analysis.cosmology.</code><code class="sig-name descname">add_hubble</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/cosmology.html#add_hubble"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.cosmology.add_hubble" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the hubble flow to velocities in snapshot f</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.cosmology.comoving_to_physical">
<code class="sig-prename descclassname">pynbody.analysis.cosmology.</code><code class="sig-name descname">comoving_to_physical</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ar</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/cosmology.html#comoving_to_physical"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.cosmology.comoving_to_physical" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an array, modify it to be in physical units (remove any
dependencies on a or aform).</p>
</dd></dl>

</div>
<span class="target" id="module-pynbody.analysis.decomp"></span><div class="section" id="decomp">
<h2>decomp<a class="headerlink" href="#decomp" title="Permalink to this headline">¶</a></h2>
<p>Tools for bulge/disk/halo decomposition</p>
<dl class="py function">
<dt id="pynbody.analysis.decomp.decomp">
<code class="sig-prename descclassname">pynbody.analysis.decomp.</code><code class="sig-name descname">decomp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">h</span></em>, <em class="sig-param"><span class="n">aligned</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">j_disk_min</span><span class="o">=</span><span class="default_value">0.8</span></em>, <em class="sig-param"><span class="n">j_disk_max</span><span class="o">=</span><span class="default_value">1.1</span></em>, <em class="sig-param"><span class="n">E_cut</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">j_circ_from_r</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">cen</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">vcen</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">log_interp</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">angmom_size</span><span class="o">=</span><span class="default_value">'3 kpc'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/decomp.html#decomp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.decomp.decomp" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an array ‘decomp’ for star particles in the simulation, with an
integer specifying a kinematic decomposition. The possible values are:</p>
<p>1 – thin disk</p>
<p>2 – halo</p>
<p>3 – bulge</p>
<p>4 – thick disk</p>
<p>5 – pseudo bulge</p>
<p>This routine is based on an original IDL procedure by Chris Brook.</p>
<p><strong>Parameters:</strong></p>
<p><em>h</em> – the halo to work on</p>
<dl class="simple">
<dt><em>j_disk_min</em> – the minimum angular momentum as a proportion of</dt><dd><p>the circular angular momentum which a particle must
have to be part of the ‘disk’</p>
</dd>
<dt><em>j_disk_max</em> – the maximum angular momentum as a proportion of</dt><dd><p>the circular angular momentum which a particle can
have to be part of the ‘disk’</p>
</dd>
<dt><em>E_cut</em> – the energy boundary between bulge and spheroid. If</dt><dd><p>None, this is taken to be the median energy of the stars.</p>
</dd>
<dt><em>aligned</em> – if False, the simulation is recenterd and aligned so</dt><dd><p>the disk is in the xy plane as required for the rest of
the analysis.</p>
</dd>
<dt><em>cen</em> – if not None, specifies the center of the halo. Otherwise</dt><dd><p>it is found.  This has no effect if aligned=True</p>
</dd>
<dt><em>vcen</em> – if not None, specifies the velocity center of the</dt><dd><p>halo. Otherwise it is found.  This has no effect if
aligned=True</p>
</dd>
</dl>
<p><em>j_circ_from_r</em> – if True, the maximum angular momentum is
determined as a function of radius, rather than as a function of
orbital energy. Default False (determine as function of energy).</p>
<dl class="simple">
<dt><em>angmom_size</em> – the size of the gas sphere used to determine the</dt><dd><p>plane of the disk</p>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-pynbody.analysis.gravity"></span><div class="section" id="gravity">
<h2>gravity<a class="headerlink" href="#gravity" title="Permalink to this headline">¶</a></h2>
<p>Functions for calculating the gravitational potential and accelerations.</p>
<dl class="py function">
<dt id="pynbody.analysis.gravity.potential">
<code class="sig-prename descclassname">pynbody.analysis.gravity.</code><code class="sig-name descname">potential</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">pos_vec</span></em>, <em class="sig-param"><span class="n">eps</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/gravity.html#potential"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.gravity.potential" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the gravitational potential at the specified position
using all particles in the specified snapshot.</p>
<p>The gravitational softening length is determined by (in order of
preference):</p>
<ol class="arabic simple">
<li><p>The parameter eps (scalar, unit or array)</p></li>
<li><p>The array f[‘eps’]</p></li>
<li><p>f.properties[‘eps’] (scalar or unit)</p></li>
</ol>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.gravity.accel">
<code class="sig-prename descclassname">pynbody.analysis.gravity.</code><code class="sig-name descname">accel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">pos_vec</span></em>, <em class="sig-param"><span class="n">eps</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/gravity.html#accel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.gravity.accel" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the gravitational acceleration vector at the specified
position using all particles in the specified snapshot.</p>
<p>The gravitational softening length is determined by (in order of
preference):</p>
<ol class="arabic simple">
<li><p>The parameter eps (scalar, unit or array)</p></li>
<li><p>The array f[‘eps’]</p></li>
<li><p>f.properties[‘eps’] (scalar or unit)</p></li>
</ol>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.gravity.midplane_rot_curve">
<code class="sig-prename descclassname">pynbody.analysis.gravity.</code><code class="sig-name descname">midplane_rot_curve</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">rxy_points</span></em>, <em class="sig-param"><span class="n">eps</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/gravity.html#midplane_rot_curve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.gravity.midplane_rot_curve" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the midplane rotation curve at a specified set of
points. Used primarily by <a class="reference internal" href="#pynbody.analysis.profile.v_circ" title="pynbody.analysis.profile.v_circ"><code class="xref py py-func docutils literal notranslate"><span class="pre">pynbody.analysis.profile.v_circ()</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.gravity.midplane_potential">
<code class="sig-prename descclassname">pynbody.analysis.gravity.</code><code class="sig-name descname">midplane_potential</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">rxy_points</span></em>, <em class="sig-param"><span class="n">eps</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/gravity.html#midplane_potential"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.gravity.midplane_potential" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the midplane potential at a specified set of
points. Used primarily by <a class="reference internal" href="#pynbody.analysis.profile.pot" title="pynbody.analysis.profile.pot"><code class="xref py py-func docutils literal notranslate"><span class="pre">pynbody.analysis.profile.pot()</span></code></a></p>
</dd></dl>

</div>
<span class="target" id="module-pynbody.analysis.halo"></span><div class="section" id="halo">
<h2>halo<a class="headerlink" href="#halo" title="Permalink to this headline">¶</a></h2>
<p>Functions for dealing with and manipulating halos in simulations.</p>
<dl class="py function">
<dt id="pynbody.analysis.halo.center_of_mass">
<code class="sig-prename descclassname">pynbody.analysis.halo.</code><code class="sig-name descname">center_of_mass</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/halo.html#center_of_mass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.halo.center_of_mass" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the centre of mass of the SimSnap</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.halo.center_of_mass_velocity">
<code class="sig-prename descclassname">pynbody.analysis.halo.</code><code class="sig-name descname">center_of_mass_velocity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/halo.html#center_of_mass_velocity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.halo.center_of_mass_velocity" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the center of mass velocity of the SimSnap</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.halo.shrink_sphere_center">
<code class="sig-prename descclassname">pynbody.analysis.halo.</code><code class="sig-name descname">shrink_sphere_center</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">r</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">shrink_factor</span><span class="o">=</span><span class="default_value">0.7</span></em>, <em class="sig-param"><span class="n">min_particles</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">num_threads</span><span class="o">=</span><span class="default_value">8</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/halo.html#shrink_sphere_center"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.halo.shrink_sphere_center" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the center according to the shrinking-sphere method of
Power et al (2003)</p>
<p><strong>Input</strong>:</p>
<p><em>sim</em> : a simulation snapshot - this can be any subclass of SimSnap</p>
<p><strong>Optional Keywords</strong>:</p>
<dl class="simple">
<dt><em>r</em> (default=None): initial search radius. This can be a string</dt><dd><p>indicating the unit, i.e. “200 kpc”, or an instance of
<a class="reference internal" href="essentials.html#pynbody.units.Unit" title="pynbody.units.Unit"><code class="xref py py-func docutils literal notranslate"><span class="pre">Unit()</span></code></a>.</p>
</dd>
<dt><em>shrink_factor</em> (default=0.7): the amount to shrink the search</dt><dd><p>radius by on each iteration</p>
</dd>
<dt><em>min_particles</em> (default=100): minimum number of particles within</dt><dd><p>the search radius. When this number is reached, the search is
complete.</p>
</dd>
<dt><em>verbose</em> (default=False): if True, prints out the diagnostics at</dt><dd><p>each iteration. Useful to determine whether the centering is
zeroing in on the wrong part of the simulation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.halo.virial_radius">
<code class="sig-prename descclassname">pynbody.analysis.halo.</code><code class="sig-name descname">virial_radius</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">cen</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">overden</span><span class="o">=</span><span class="default_value">178</span></em>, <em class="sig-param"><span class="n">r_max</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rho_def</span><span class="o">=</span><span class="default_value">'matter'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/halo.html#virial_radius"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.halo.virial_radius" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the virial radius of the halo centered on the given
coordinates.</p>
<p>The default is here defined by the sphere centered on cen which contains a
mean density of overden * rho_M_0 * (1+z)^3.</p>
<p><strong>Input</strong>:</p>
<p><em>sim</em> : a simulation snapshot - this can be any subclass of SimSnap, especially a halo.</p>
<p><strong>Optional Keywords</strong>:</p>
<p><em>cen</em> (default=None): Provides the halo center. If None, assumes that the snapshot is already centered.</p>
<p><a href="#id1"><span class="problematic" id="id2">*</span></a>rmax (default=None): Maximum radius to start the search. If None, inferred from the halo particle positions.</p>
<p><a href="#id3"><span class="problematic" id="id4">*</span></a>overden (default=178): Overdensity corresponding to the required halo boundary definition.
178 is the virial criterion for spherical collapse in an EdS Universe. Common possible values are 200, 500 etc</p>
<p><a href="#id5"><span class="problematic" id="id6">*</span></a>rho_def (default=’matter’): Physical density used to define the overdensity. Default is the matter density at
the redshift of the simulation. An other choice is “critical” for the critical density at this redshift.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.halo.hybrid_center">
<code class="sig-prename descclassname">pynbody.analysis.halo.</code><code class="sig-name descname">hybrid_center</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">r</span><span class="o">=</span><span class="default_value">'3 kpc'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/halo.html#hybrid_center"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.halo.hybrid_center" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the center of the halo by finding the shrink-sphere
-center inside the specified distance of the potential minimum</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.halo.index_center">
<code class="sig-prename descclassname">pynbody.analysis.halo.</code><code class="sig-name descname">index_center</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/halo.html#index_center"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.halo.index_center" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the center of mass based on specific particles.</p>
<p>Supply a list of indices using the <code class="docutils literal notranslate"><span class="pre">ind</span></code> keyword.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.halo.vel_center">
<code class="sig-prename descclassname">pynbody.analysis.halo.</code><code class="sig-name descname">vel_center</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cen_size</span><span class="o">=</span><span class="default_value">'1 kpc'</span></em>, <em class="sig-param"><span class="n">retcen</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">move_all</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/halo.html#vel_center"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.halo.vel_center" title="Permalink to this definition">¶</a></dt>
<dd><p>Use stars from a sphere to calculate center of velocity. The size
of the sphere is given by the <code class="docutils literal notranslate"><span class="pre">cen_size</span></code> keyword and defaults to
1 kpc.</p>
<p><strong>Keyword arguments:</strong></p>
<p><em>mode</em>: reserved for future use; currently ignored</p>
<p><em>move_all</em>: if True (default), move the entire snapshot. Otherwise only move
the particles in the halo passed in.</p>
<dl class="simple">
<dt><em>retcen</em>: if True only return the velocity center without moving the</dt><dd><p>snapshot (default = False)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.halo.center">
<code class="sig-prename descclassname">pynbody.analysis.halo.</code><code class="sig-name descname">center</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">retcen</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">vel</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">cen_size</span><span class="o">=</span><span class="default_value">'1 kpc'</span></em>, <em class="sig-param"><span class="n">move_all</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">wrap</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/halo.html#center"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.halo.center" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the center of mass of the given particles using the
specified mode, then recenter the particles (of the entire
ancestor snapshot) accordingly</p>
<p>Accepted values for <em>mode</em> are</p>
<blockquote>
<div><p><em>pot</em>: potential minimum</p>
<p><em>com</em>: center of mass</p>
<p><em>ssc</em>: shrink sphere center</p>
<p><em>ind</em>: center on specific particles; supply the list of particles using the <code class="docutils literal notranslate"><span class="pre">ind</span></code> keyword.</p>
<dl class="simple">
<dt><em>hyb</em>: for sane halos, returns the same as ssc, but works faster by</dt><dd><p>starting iteration near potential minimum</p>
</dd>
</dl>
</div></blockquote>
<p>or a function returning the COM.</p>
<p><strong>Other keywords:</strong></p>
<dl class="simple">
<dt><em>retcen</em>: if True only return the center without centering the</dt><dd><p>snapshot (default = False)</p>
</dd>
<dt><em>ind</em>: only used when <em>mode=ind</em> – specifies the indices of</dt><dd><p>particles to be used for centering</p>
</dd>
</dl>
<p><em>vel</em>: if True, translate velocities so that the velocity of the
central 1kpc (default) is zeroed. Other values can be passed with cen_size.</p>
<p><em>move_all</em>: if True (default), move the entire snapshot. Otherwise only move
the particles in the halo passed in.</p>
<p><em>wrap</em>: if True, pre-centre and wrap the simulation so that halos on the edge
of the box are handled correctly. Default False.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.halo.halo_shape">
<code class="sig-prename descclassname">pynbody.analysis.halo.</code><code class="sig-name descname">halo_shape</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">N</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">rin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rout</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bins</span><span class="o">=</span><span class="default_value">'equal'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/halo.html#halo_shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.halo.halo_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns radii in units of <code class="docutils literal notranslate"><span class="pre">sim['pos']</span></code>, axis ratios b/a and c/a,
the alignment angle of axis a in radians, and the rotation matrix
for homeoidal shells over a range of N halo radii.</p>
<p><strong>Keyword arguments:</strong></p>
<p><em>N</em> (100): The number of homeoidal shells to consider. Shells with
few particles will take longer to fit.</p>
<p><em>rin</em> (None): The minimum radial bin in units of <code class="docutils literal notranslate"><span class="pre">sim['pos']</span></code>.
Note that this applies to axis a, so particles within this radius
may still be included within homeoidal shells. By default this is
taken as rout/1000.</p>
<p><em>rout</em> (None): The maximum radial bin in units of <code class="docutils literal notranslate"><span class="pre">sim['pos']</span></code>.
By default this is taken as the largest radial value in the halo
particle distribution.</p>
<p><em>bins</em> (equal): The spacing scheme for the homeoidal shell bins.
<code class="docutils literal notranslate"><span class="pre">equal</span></code> initialises radial bins with equal numbers of particles,
with the exception of the final bin which will accomodate remainders.
This number is not necessarily maintained during fitting.
<code class="docutils literal notranslate"><span class="pre">log</span></code> and <code class="docutils literal notranslate"><span class="pre">lin</span></code> initialise bins with logarithmic and linear
radial spacing.</p>
<p>Halo must be in a centered frame.
Caution is advised when assigning large number of bins and radial
ranges with many particles, as the algorithm becomes very slow.</p>
</dd></dl>

</div>
<span class="target" id="module-pynbody.analysis.hmf"></span><div class="section" id="halo-mass-function-hmf">
<h2>halo mass function (hmf)<a class="headerlink" href="#halo-mass-function-hmf" title="Permalink to this headline">¶</a></h2>
<p>Various halo mass function routines.</p>
<dl class="py function">
<dt id="pynbody.analysis.hmf.correlation_func">
<code class="sig-prename descclassname">pynbody.analysis.hmf.</code><code class="sig-name descname">correlation_func</code><span class="sig-paren">(</span><em class="sig-param">context</em>, <em class="sig-param">log_r_min=-3</em>, <em class="sig-param">log_r_max=2</em>, <em class="sig-param">delta_log_r=0.2</em>, <em class="sig-param">pspec=&lt;class 'pynbody.analysis.hmf.PowerSpectrumCAMB'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/hmf.html#correlation_func"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.hmf.correlation_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the linear density field correlation function.</p>
<p><strong>Args</strong>:</p>
<dl class="simple">
<dt><em>context</em> (SimSnap): The snapshot from which to pull the</dt><dd><p>cosmological context (includes sigma8 normalization and growth
function integrations, but does not currently affect transfer
function)</p>
</dd>
</dl>
<p><strong>Kwargs:</strong></p>
<blockquote>
<div><dl class="simple">
<dt><em>log_r_min:</em> log10 of the minimum separation (Mpc h^-1) to</dt><dd><p>consider</p>
</dd>
<dt><em>log_r_max:</em> log10 of the maximum separation (Mpc h^-1) to</dt><dd><p>consider</p>
</dd>
</dl>
<p><em>delta_log_r:</em> The value spacing in dex</p>
<dl class="simple">
<dt><em>pspec:</em> A power spectrum object; default is a WMAP7 cosmology</dt><dd><p>calculated by CAMB.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Returns:</strong></p>
<blockquote>
<div><dl class="simple">
<dt><em>r:</em> Array of the r values (Mpc h^-1) for which the correlation</dt><dd><p>function was evaluated.</p>
</dd>
<dt><em>Xi:</em> Array of the dimensionless correlation for each</dt><dd><p>separation.</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.hmf.f_press_schechter">
<code class="sig-prename descclassname">pynbody.analysis.hmf.</code><code class="sig-name descname">f_press_schechter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nu</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/hmf.html#f_press_schechter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.hmf.f_press_schechter" title="Permalink to this definition">¶</a></dt>
<dd><p>The Press-Schechter kernel used by halo_mass_function</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.hmf.f_sheth_tormen">
<code class="sig-prename descclassname">pynbody.analysis.hmf.</code><code class="sig-name descname">f_sheth_tormen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nu</span></em>, <em class="sig-param"><span class="n">Anorm</span><span class="o">=</span><span class="default_value">0.3222</span></em>, <em class="sig-param"><span class="n">a</span><span class="o">=</span><span class="default_value">0.707</span></em>, <em class="sig-param"><span class="n">p</span><span class="o">=</span><span class="default_value">0.3</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/hmf.html#f_sheth_tormen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.hmf.f_sheth_tormen" title="Permalink to this definition">¶</a></dt>
<dd><p>Sheth &amp; Tormen (1999) fit (see also Sheth Mo &amp; Tormen 2001)</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.hmf.f_reed_no_z">
<code class="sig-prename descclassname">pynbody.analysis.hmf.</code><code class="sig-name descname">f_reed_no_z</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nu</span></em>, <em class="sig-param"><span class="n">deltac</span><span class="o">=</span><span class="default_value">1.68647</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/hmf.html#f_reed_no_z"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.hmf.f_reed_no_z" title="Permalink to this definition">¶</a></dt>
<dd><p>modified S-T fit  by the G1 gaussian term and c</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.hmf.f_reed_z_evo">
<code class="sig-prename descclassname">pynbody.analysis.hmf.</code><code class="sig-name descname">f_reed_z_evo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nu</span></em>, <em class="sig-param"><span class="n">neff</span></em>, <em class="sig-param"><span class="n">deltac</span><span class="o">=</span><span class="default_value">1.68647</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/hmf.html#f_reed_z_evo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.hmf.f_reed_z_evo" title="Permalink to this definition">¶</a></dt>
<dd><p>modified S-T fit  by the n_eff dependence and the G1 and G2 gaussian terms and c 
where   P(k) proportional to k_halo**(n_eff)  and  
k_halo = Mhalo / r_halo_precollapse.  
eqn 13 of Reed et al 2007   estimtes neff = 6 d ln(1/sigma(M))/ d ln M  - 3</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.hmf.cole_kaiser_bias">
<code class="sig-prename descclassname">pynbody.analysis.hmf.</code><code class="sig-name descname">cole_kaiser_bias</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nu</span></em>, <em class="sig-param"><span class="n">delta_c</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/hmf.html#cole_kaiser_bias"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.hmf.cole_kaiser_bias" title="Permalink to this definition">¶</a></dt>
<dd><p>The Cole-Kaiser (1989) bias function. Also in Mo &amp; White 1996.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.hmf.sheth_tormen_bias">
<code class="sig-prename descclassname">pynbody.analysis.hmf.</code><code class="sig-name descname">sheth_tormen_bias</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nu</span></em>, <em class="sig-param"><span class="n">delta_c</span></em>, <em class="sig-param"><span class="n">a</span><span class="o">=</span><span class="default_value">0.707</span></em>, <em class="sig-param"><span class="n">b</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">c</span><span class="o">=</span><span class="default_value">0.6</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/hmf.html#sheth_tormen_bias"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.hmf.sheth_tormen_bias" title="Permalink to this definition">¶</a></dt>
<dd><p>The Sheth-Tormen (1999) bias function [eq 8]</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.hmf.halo_mass_function">
<code class="sig-prename descclassname">pynbody.analysis.hmf.</code><code class="sig-name descname">halo_mass_function</code><span class="sig-paren">(</span><em class="sig-param">context</em>, <em class="sig-param">log_M_min=8.0</em>, <em class="sig-param">log_M_max=15.0</em>, <em class="sig-param">delta_log_M=0.1</em>, <em class="sig-param">kern='ST'</em>, <em class="sig-param">pspec=&lt;class 'pynbody.analysis.hmf.PowerSpectrumCAMB'&gt;</em>, <em class="sig-param">delta_crit=1.686</em>, <em class="sig-param">no_h=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/hmf.html#halo_mass_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.hmf.halo_mass_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the halo mass function, dN/d log_{10} M in units of Mpc^-3
h^3.</p>
<p><strong>Args:</strong></p>
<p><em>context (SimSnap):</em> The snapshot from which to pull the
cosmological context (includes sigma8 normalization and growth
function integrations, but does not currently affect transfer
function)</p>
<p><strong>Kwargs:</strong></p>
<p><em>log_M_min:</em> The minimum halo mass (Msol h^-1) to consider</p>
<p><em>log_M_max:</em> The maximum halo mass (Msol h^-1) to consider</p>
<p><em>delta_log_M:</em> The bin spacing of halo masses (see warning below)</p>
<p><em>kern:</em> The kernel function which dictates what type of mass
function to calculate; or a string (“PS” or “ST”) for one
of the defaults</p>
<p><em>pspec:</em> A power spectrum object (which also defines the window
function); default is a WMAP7 cosmology calculated by
CAMB, and a top hat window</p>
<p><em>delta_crit:</em> The critical overdensity for collapse</p>
<p><strong>Returns:</strong></p>
<p><em>M:</em> The centre of the mass bins, in Msol h^-1</p>
<p><em>sigma:</em> The linear variance of the corresponding sphere</p>
<p><em>N:</em> The abundance of halos of that mass (Mpc^-3 h^3 comoving,
per decade of mass)</p>
<p>Because numerical derivatives are involved, the value of
delta_log_M affects the accuracy. Numerical experiments suggest
that delta_log_M=0.1 gives more than enough accuracy, but you
should check for your own use case.</p>
<p>Recommended m.f. for friends-of-friends linking length 0.2 particle sep.:
z &lt;~ 2 : bhattacharya  
z &gt;~ 5 : reed_universal (no redshift dependence)
: or reed_evolving (w/redshift dependence for additional accuracy)</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.hmf.halo_bias">
<code class="sig-prename descclassname">pynbody.analysis.hmf.</code><code class="sig-name descname">halo_bias</code><span class="sig-paren">(</span><em class="sig-param">context</em>, <em class="sig-param">M</em>, <em class="sig-param">kern=&lt;function cole_kaiser_bias&gt;</em>, <em class="sig-param">pspec=&lt;class 'pynbody.analysis.hmf.PowerSpectrumCAMB'&gt;</em>, <em class="sig-param">delta_crit=1.686</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/hmf.html#halo_bias"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.hmf.halo_bias" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the halo bias for the given halo mass.</p>
<p><strong>Args:</strong></p>
<blockquote>
<div><dl class="simple">
<dt><em>context (SimSnap):</em> The snapshot from which to pull the</dt><dd><p>cosmological context</p>
</dd>
<dt><em>M:</em> float, unit or string describing the halo mass. If a</dt><dd><p>float, units are Msol h^-1.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Kwargs:</strong></p>
<blockquote>
<div><dl class="simple">
<dt><em>kern:</em> The kernel function describing the halo bias (default</dt><dd><p>Cole-Kaiser).</p>
</dd>
<dt><em>pspec:</em> A power spectrum object (which also defines the window</dt><dd><p>function); default is a WMAP7 cosmology calculated by
CAMB, and a top hat window</p>
</dd>
</dl>
<p><em>delta_crit:</em> The critical overdensity for collapse</p>
</div></blockquote>
<p><strong>Returns:</strong></p>
<blockquote>
<div><p>The halo bias (single float)</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.hmf.simulation_halo_mass_function">
<code class="sig-prename descclassname">pynbody.analysis.hmf.</code><code class="sig-name descname">simulation_halo_mass_function</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">snapshot</span></em>, <em class="sig-param"><span class="n">log_M_min</span><span class="o">=</span><span class="default_value">8.0</span></em>, <em class="sig-param"><span class="n">log_M_max</span><span class="o">=</span><span class="default_value">15.0</span></em>, <em class="sig-param"><span class="n">delta_log_M</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">masses</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mass_def</span><span class="o">=</span><span class="default_value">'halo_finder'</span></em>, <em class="sig-param"><span class="n">calculate_err</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">subsample_catalogue</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/hmf.html#simulation_halo_mass_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.hmf.simulation_halo_mass_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct the halo mass function from a halo catalogue by binning haloes in mass and counting them.
This allows direct plotting of the simulation HMF against the theory HMF.</p>
<p><strong>Args:</strong></p>
<blockquote>
<div><p><em>snapshot (SimSnap):</em> The snapshot from which to calculate halo masses</p>
</div></blockquote>
<p><strong>Kwargs:</strong></p>
<blockquote>
<div><p><em>log_M_min:</em> The minimum halo mass (Msol h^-1) to consider</p>
<p><em>log_M_max:</em> The maximum halo mass (Msol h^-1) to consider</p>
<p><em>delta_log_M:</em> The bin spacing of halo masses</p>
<p><em>masses: Provide array of halo masses in Msol h*</em>-1. If none, this is calculated from the snapshot.</p>
<p><a href="#id7"><span class="problematic" id="id8">*</span></a>mass_def: Definition of the mass of a halo. Possible extensions could be M200_crit, M200_matter, Mvir etc…</p>
<p><a href="#id9"><span class="problematic" id="id10">*</span></a>err: If true, calculates error bars according to Poisson process.</p>
<p><a href="#id11"><span class="problematic" id="id12">*</span></a>subsample_catalogue: Sample the halo catalogue every int value. Mostly for speed and debugging issues.
WARNING: If your halo catalogue is ordered, this method does not take responsability in randomising the catalogue so
you might not recover the true HMF.</p>
</div></blockquote>
<p><strong>Returns:</strong></p>
<blockquote>
<div><p>The binned number density of haloes in this snapshot in comoving Mpc**-3 h**3 per decade of mass</p>
</div></blockquote>
</dd></dl>

</div>
<span class="target" id="module-pynbody.analysis.ionfrac"></span><div class="section" id="ionfrac">
<h2>ionfrac<a class="headerlink" href="#ionfrac" title="Permalink to this headline">¶</a></h2>
<p>calculates ionization fractions - NEEDS DOCUMENTATION</p>
<dl class="py function">
<dt id="pynbody.analysis.ionfrac.calculate">
<code class="sig-prename descclassname">pynbody.analysis.ionfrac.</code><code class="sig-name descname">calculate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">ion</span><span class="o">=</span><span class="default_value">'ovi'</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'old'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/ionfrac.html#calculate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.ionfrac.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate – documentation placeholder</p>
</dd></dl>

</div>
<span class="target" id="module-pynbody.analysis.luminosity"></span><div class="section" id="luminosity">
<h2>luminosity<a class="headerlink" href="#luminosity" title="Permalink to this headline">¶</a></h2>
<p>Calculates luminosities – NEEDS DOCUMENTATION</p>
<dl class="py function">
<dt id="pynbody.analysis.luminosity.use_custom_cmd">
<code class="sig-prename descclassname">pynbody.analysis.luminosity.</code><code class="sig-name descname">use_custom_cmd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/luminosity.html#use_custom_cmd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.luminosity.use_custom_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Use a custom set of stellar populations to calculate magnitudes.</p>
<p>The path is to a numpy archive with a suitable grid of ages/metallicities and corresponding magnitudes.</p>
<p>The following script from Stephanie De Beer should help you make a suitable file starting
from ugriz SSPs downloaded from <a class="reference external" href="http://stev.oapd.inaf.it/cgi-bin/cmd">http://stev.oapd.inaf.it/cgi-bin/cmd</a>.</p>
<p>import numpy as np</p>
<p>metals = np.linspace(0.002, 0.05, 25)
ages = np.logspace(5.67, 10.13, 25)</p>
<p>mags_bol = np.zeros((len(metals),len(ages)))
mags_u = np.zeros((len(metals),len(ages)))
mags_g = np.zeros((len(metals),len(ages)))
mags_r = np.zeros((len(metals),len(ages)))
mags_i = np.zeros((len(metals),len(ages)))
mags_z = np.zeros((len(metals),len(ages)))</p>
<p>bands = [‘bol’, ‘u’, ‘g’, ‘r’, ‘i’, ‘z’]
k=2
for b in bands:</p>
<blockquote>
<div><dl>
<dt>for x in range(1,26):</dt><dd><dl class="simple">
<dt>with open(‘/users/sdebeer/render_stuff/PGSP_files/’+str(x)+’_output.txt’, ‘r’) as f:</dt><dd><p>output = f.readlines()</p>
</dd>
</dl>
<p>i = 0
for line in output:</p>
<blockquote>
<div><p>magnitudes = line.split()
if magnitudes[0]==’#’:</p>
<blockquote>
<div><p>continue</p>
</div></blockquote>
<p>vars()[‘<a href="#id13"><span class="problematic" id="id14">mags_</span></a>’+b][i,x-1]=magnitudes[k]
i +=1</p>
</div></blockquote>
</dd>
</dl>
<p>k+=1</p>
</div></blockquote>
<p>np.savez(‘my_cmd.npz’, ages=ages, metals=metals, bol=mags_bol, u=mags_u, g=mags_g, r=mags_r, i=mags_i, z=mags_z)</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.luminosity.calc_mags">
<code class="sig-prename descclassname">pynbody.analysis.luminosity.</code><code class="sig-name descname">calc_mags</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">simstars</span></em>, <em class="sig-param"><span class="n">band</span><span class="o">=</span><span class="default_value">'v'</span></em>, <em class="sig-param"><span class="n">cmd_path</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/luminosity.html#calc_mags"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.luminosity.calc_mags" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculating visible magnitudes</p>
<p>Using Padova Simple stellar populations (SSPs) from Girardi
<a class="reference external" href="http://stev.oapd.inaf.it/cgi-bin/cmd">http://stev.oapd.inaf.it/cgi-bin/cmd</a>
Marigo+ (2008), Girardi+ (2010)</p>
<p>pynbody includes a grid of SSP luminosities for many bandpasses for
various stellar ages and metallicities.  This function linearly 
interpolates to the desired value and returns the value as a magnitude.</p>
<p><strong>Usage:</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pynbody</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pynbody</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">luminosity</span><span class="o">.</span><span class="n">calc_mags</span><span class="p">(</span><span class="n">h</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Optional keyword arguments:</strong></p>
<blockquote>
<div><dl class="simple">
<dt><em>band</em> (default=’v’): Which observed bandpass magnitude in which </dt><dd><p>magnitude should be calculated</p>
</dd>
<dt><em>path</em> (default=None): Path to the CMD grid. If None, use the</dt><dd><p>default or a path specified by use_custom_cmd. For more information
about generating a custom CMD grid, see use_custom_cmd.</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.luminosity.halo_mag">
<code class="sig-prename descclassname">pynbody.analysis.luminosity.</code><code class="sig-name descname">halo_mag</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">band</span><span class="o">=</span><span class="default_value">'v'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/luminosity.html#halo_mag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.luminosity.halo_mag" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculating halo magnitude</p>
<p>Calls pynbody.analysis.luminosity.calc_mags for ever star in passed
in simulation, converts those magnitudes back to luminosities, adds
those luminosities, then converts that luminosity back to magnitudes,
which are returned.</p>
<p><strong>Usage:</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pynbody</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pynbody</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">luminosity</span><span class="o">.</span><span class="n">halo_mag</span><span class="p">(</span><span class="n">h</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Optional keyword arguments:</strong></p>
<blockquote>
<div><dl class="simple">
<dt><em>band</em> (default=’v’): Which observed bandpass magnitude in which </dt><dd><p>magnitude should be calculated</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.luminosity.halo_lum">
<code class="sig-prename descclassname">pynbody.analysis.luminosity.</code><code class="sig-name descname">halo_lum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">band</span><span class="o">=</span><span class="default_value">'v'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/luminosity.html#halo_lum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.luminosity.halo_lum" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculating halo luminosiy</p>
<p>Calls pynbody.analysis.luminosity.calc_mags for every star in passed
in simulation, converts those magnitudes back to luminosities, adds
those luminosities, which are returned.  Uses solar magnitudes from
<a class="reference external" href="http://www.ucolick.org/~cnaw/sun.html">http://www.ucolick.org/~cnaw/sun.html</a>.</p>
<p><strong>Usage:</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pynbody</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pynbody</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">luminosity</span><span class="o">.</span><span class="n">halo_mag</span><span class="p">(</span><span class="n">h</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Optional keyword arguments:</strong></p>
<blockquote>
<div><dl class="simple">
<dt><em>band</em> (default=’v’): Which observed bandpass magnitude in which </dt><dd><p>magnitude should be calculated</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.luminosity.half_light_r">
<code class="sig-prename descclassname">pynbody.analysis.luminosity.</code><code class="sig-name descname">half_light_r</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">band</span><span class="o">=</span><span class="default_value">'v'</span></em>, <em class="sig-param"><span class="n">cylindrical</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/luminosity.html#half_light_r"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.luminosity.half_light_r" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate half light radius</p>
<p>Calculates entire luminosity of simulation, finds half that, sorts
stars by distance from halo center, and finds out inside which radius
the half luminosity is reached.</p>
<p>If cylindrical is True compute the half light radius as seen from the z-axis.</p>
</dd></dl>

</div>
<span class="target" id="module-pynbody.analysis.pkdgrav_cosmo"></span><div class="section" id="pkdgrav-cosmo">
<h2>pkdgrav_cosmo<a class="headerlink" href="#pkdgrav-cosmo" title="Permalink to this headline">¶</a></h2>
<p>Cosmological module from PKDGRAV.</p>
<p>N.B.  This code is being shared with skid and the I.C. generator.</p>
<p><strong>NEEDS DOCUMENTATION</strong></p>
<dl class="py class">
<dt id="pynbody.analysis.pkdgrav_cosmo.Cosmology">
<em class="property">class </em><code class="sig-prename descclassname">pynbody.analysis.pkdgrav_cosmo.</code><code class="sig-name descname">Cosmology</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">H0</span><span class="o">=</span><span class="default_value">2.8944050182330705</span></em>, <em class="sig-param"><span class="n">Om</span><span class="o">=</span><span class="default_value">0.272</span></em>, <em class="sig-param"><span class="n">L</span><span class="o">=</span><span class="default_value">0.728</span></em>, <em class="sig-param"><span class="n">Ob</span><span class="o">=</span><span class="default_value">0.0456</span></em>, <em class="sig-param"><span class="n">Or</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">Quin</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">Ok</span><span class="o">=</span><span class="default_value">0.0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/pkdgrav_cosmo.html#Cosmology"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.pkdgrav_cosmo.Cosmology" title="Permalink to this definition">¶</a></dt>
<dd><p>docs placeholder</p>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">ComoveKickFac</span></code>(dTime, dDelta)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Exp2Hub</span></code>(dExp)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">ExpDot2</span></code>(dExp)</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 72%" />
<col style="width: 28%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>ComoveDriftFac</strong></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>ComoveDriftInt</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>ComoveKickInt</strong></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>ComoveLookbackTime2Exp</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>CosmoTint</strong></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>Exp2Om</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>Exp2Time</strong></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>GrowthFac</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>GrowthFacDeriv</strong></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>GrowthFacDot</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>Time2Exp</strong></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><strong>Time2Hub</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<span class="target" id="module-pynbody.analysis.profile"></span><div class="section" id="profile">
<h2>profile<a class="headerlink" href="#profile" title="Permalink to this headline">¶</a></h2>
<p>A set of classes and functions for making profiles of simulation
properties.</p>
<dl class="py class">
<dt id="pynbody.analysis.profile.Profile">
<em class="property">class </em><code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">Profile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">load_from_file</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ndim</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">type</span><span class="o">=</span><span class="default_value">'lin'</span></em>, <em class="sig-param"><span class="n">calc_x</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">weight_by</span><span class="o">=</span><span class="default_value">'mass'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#Profile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.Profile" title="Permalink to this definition">¶</a></dt>
<dd><p>A basic profile class for arbitrary profiles. Stores information
about bins etc.</p>
<p>Made to work with the pynbody SimSnap instances. The constructor
only generates the bins and figures out which particles belong in
which bin.  Profiles are generated lazy-loaded when a given
property is requested.</p>
<p><strong>Input</strong>:</p>
<p><em>sim</em> : a simulation snapshot - this can be any subclass of SimSnap</p>
<p><strong>Optional Keywords</strong>:</p>
<dl class="simple">
<dt><em>ndim</em> (default = 2): specifies whether it’s a 2D or 3D profile - in the</dt><dd><p>2D case, the bins are generated in the xy plane</p>
</dd>
<dt><em>type</em> (default = ‘lin’): specifies whether bins should be spaced linearly (‘lin’),</dt><dd><p>logarithmically (‘log’) or contain equal numbers of
particles (‘equaln’)</p>
</dd>
</dl>
<p><em>rmin</em> (default = min(x)): minimum radial value to consider</p>
<p><em>rmax</em> (default = max(x)): maximum radial value to consider</p>
<p><em>nbins</em> (default = 100): number of bins</p>
<dl class="simple">
<dt><em>bins</em><span class="classifier">array like - predefined bin edges in units of binning quantity. If this</span></dt><dd><p>keyword is set, the values of the keywords <em>type</em>, <em>nbins</em>, <em>rmin</em> and <em>rmax</em>
will be ignored</p>
</dd>
<dt><em>calc_x</em> (default = None): function to use to calculate the value</dt><dd><p>for binning. If None it defaults to the radial distance from
origin (in either 2 or 3 dimensions), ut you can specify this
function to return any value you want for making profiles along
arbitrary axes. Depening on your function, the units of certain
profiles (such as density) might not make sense.</p>
</dd>
<dt><em>weight_by</em> (default = ‘mass’): name of the array to use for weighting</dt><dd><p>averages across particles in each bin</p>
</dd>
</dl>
<p><strong>Output</strong>:</p>
<p>a Profile object. To find out which profiles are available, use keys().</p>
<p><strong>Implemented profile functions</strong>:</p>
<p><em>density</em>    : density</p>
<p><em>mass</em>       : mass in each bin</p>
<p><em>mass_enc</em>   : enclosed mass</p>
<dl class="simple">
<dt><em>fourier</em><span class="classifier">provides fourier coefficients, amplitude and phase for</span></dt><dd><p>m=0 to m=6.  To access the amplitude profile of m=2 mode, do
<code class="docutils literal notranslate"><span class="pre">p['fourier']['amp'][2,:]</span></code></p>
</dd>
</dl>
<p><em>dyntime</em>    : dynamical time</p>
<p><em>g_spherical</em>: GM_enc/r^2</p>
<dl class="simple">
<dt><em>rotation_curve_spherical</em>: rotation curve from vc = sqrt(GM/R) -</dt><dd><p>can be very wrong!</p>
</dd>
</dl>
<p><em>j_circ</em>     : angular momentum of particles on circular orbits</p>
<dl class="simple">
<dt><em>v_circ</em><span class="classifier">circular velocity, aka rotation curve - calculated from</span></dt><dd><p>the midplane gravity, so this can be expensive</p>
</dd>
</dl>
<p><em>E_circ</em>     : energy of particles on circular orbits in the midplane</p>
<p><em>omega</em>      : circular orbital frequency</p>
<p><em>kappa</em>      : radial orbital frequency</p>
<p><em>beta</em>       : 3-D velocity anisotropy parameter</p>
<p><em>magnitudes</em> : magnitudes in each bin - default band = ‘v’</p>
<p><em>sb</em>         : surface brightness - default band = ‘v’</p>
<p>Additional functions should use the profile_property to yield the
desired profile.</p>
<p><strong>Lazy-loading arrays:</strong></p>
<p>The Profile class will automatically compute a mass-weighted
profile for any lazy-loadable array of its parent SimSnap object.</p>
<p><strong>Dispersions:</strong></p>
<p>To obtain a dispersion profile, attach a <code class="docutils literal notranslate"><span class="pre">_disp</span></code> after the desired
quantity name.</p>
<p><strong>RMS:</strong></p>
<p>The root-mean-square of a quantity can be obtained by using a <code class="docutils literal notranslate"><span class="pre">_rms</span></code> suffix</p>
<p><strong>Derivatives:</strong></p>
<p>To compute a derivative of a profile, prepend a <code class="docutils literal notranslate"><span class="pre">d_</span></code> to the
profile string, as in <code class="docutils literal notranslate"><span class="pre">p['d_temp']</span></code> to get a temperature gradient.</p>
<p><strong>Saving and loading previously generated profiles:</strong></p>
<p>Use the <a class="reference internal" href="#pynbody.analysis.profile.Profile.write" title="pynbody.analysis.profile.Profile.write"><code class="xref py py-func docutils literal notranslate"><span class="pre">write()</span></code></a> function
to write the current profiles with all the necessary information
to a file. Initialize a profile with the load_from_file=True
keyword to automatically load a previously saved profile. The
filename is chosen automatically and corresponds to a hash
generated from the positions of the particles used in the
profile. This is to ensure that you are always looking at the same
set of particles, centered in the same way. It also means you
<em>must</em> use the same centering method if you want to reuse a saved
profile.</p>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pynbody.analysis.profile.Profile.create_particle_array" title="pynbody.analysis.profile.Profile.create_particle_array"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_particle_array</span></code></a>(profile_name[, …])</p></td>
<td><p>Create a particle array with the results of the profile calculation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pynbody.analysis.profile.Profile.derivable_keys" title="pynbody.analysis.profile.Profile.derivable_keys"><code class="xref py py-obj docutils literal notranslate"><span class="pre">derivable_keys</span></code></a>()</p></td>
<td><p>Returns a list of possible profiles</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pynbody.analysis.profile.Profile.families" title="pynbody.analysis.profile.Profile.families"><code class="xref py py-obj docutils literal notranslate"><span class="pre">families</span></code></a>()</p></td>
<td><p>Returns the family of particles used</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pynbody.analysis.profile.Profile.keys" title="pynbody.analysis.profile.Profile.keys"><code class="xref py py-obj docutils literal notranslate"><span class="pre">keys</span></code></a>()</p></td>
<td><p>Returns a listing of available profile types</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pynbody.analysis.profile.Profile.write" title="pynbody.analysis.profile.Profile.write"><code class="xref py py-obj docutils literal notranslate"><span class="pre">write</span></code></a>()</p></td>
<td><p>Writes all the vital information of the profile to a file.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 67%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>profile_property</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pynbody.analysis.profile.Profile.keys">
<code class="sig-name descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#Profile.keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.Profile.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a listing of available profile types</p>
</dd></dl>

<dl class="py method">
<dt id="pynbody.analysis.profile.Profile.derivable_keys">
<code class="sig-name descname">derivable_keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#Profile.derivable_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.Profile.derivable_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of possible profiles</p>
</dd></dl>

<dl class="py method">
<dt id="pynbody.analysis.profile.Profile.families">
<code class="sig-name descname">families</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#Profile.families"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.Profile.families" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the family of particles used</p>
</dd></dl>

<dl class="py method">
<dt id="pynbody.analysis.profile.Profile.create_particle_array">
<code class="sig-name descname">create_particle_array</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">profile_name</span></em>, <em class="sig-param"><span class="n">particle_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out_sim</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#Profile.create_particle_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.Profile.create_particle_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a particle array with the results of the profile
calculation.</p>
<p>After calling this function, sim[particle_name][i] ==
profile[profile_name][bin_in_which_particle_i_sits]</p>
<p>If particle_name is not specified, it defaults to the same as
profile_name.</p>
</dd></dl>

<dl class="py method">
<dt id="pynbody.analysis.profile.Profile.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#Profile.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.Profile.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes all the vital information of the profile to a file.</p>
<p>To recover the profile, initialize a profile with the
load_from_file=True keyword to automatically load a previously
saved profile. The filename is chosen automatically and
corresponds to a hash generated from the positions of the
particles used in the profile. This is to ensure that you are
always looking at the same set of particles, centered in the
same way. It also means you <em>must</em> use the same centering
method if you want to reuse a saved profile.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.weight_fn">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">weight_fn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">weight_by</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#weight_fn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.weight_fn" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate mass in each bin</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.density">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">density</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#density"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.density" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a radial density profile for the current type of profile</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.fourier">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">fourier</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">delta_t</span><span class="o">=</span><span class="default_value">'0.1 Myr'</span></em>, <em class="sig-param"><span class="n">phi_bins</span><span class="o">=</span><span class="default_value">100</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#fourier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.fourier" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a profile of fourier coefficients, amplitudes and phases</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.pattern_frequency">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">pattern_frequency</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pro</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#pattern_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.pattern_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate the pattern speed from the m=2 Fourier mode</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.mass_enc">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">mass_enc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#mass_enc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.mass_enc" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the enclosed mass profile</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.density_enc">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">density_enc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#density_enc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.density_enc" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the mean enclosed density profile</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.dyntime">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">dyntime</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#dyntime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.dyntime" title="Permalink to this definition">¶</a></dt>
<dd><p>The dynamical time of the bin, sqrt(R^3/2GM).</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.g_spherical">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">g_spherical</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#g_spherical"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.g_spherical" title="Permalink to this definition">¶</a></dt>
<dd><p>The naive gravitational acceleration assuming spherical
symmetry = GM_enc/r^2</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.rotation_curve_spherical">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">rotation_curve_spherical</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#rotation_curve_spherical"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.rotation_curve_spherical" title="Permalink to this definition">¶</a></dt>
<dd><p>The naive rotation curve assuming spherical symmetry: vc = sqrt(G M_enc/r)</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.j_circ">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">j_circ</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">p</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#j_circ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.j_circ" title="Permalink to this definition">¶</a></dt>
<dd><p>Angular momentum of particles on circular orbits.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.v_circ">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">v_circ</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">p</span></em>, <em class="sig-param"><span class="n">grav_sim</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#v_circ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.v_circ" title="Permalink to this definition">¶</a></dt>
<dd><p>Circular velocity, i.e. rotation curve. Calculated by computing the gravity 
in the midplane - can be expensive</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.E_circ">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">E_circ</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">p</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#E_circ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.E_circ" title="Permalink to this definition">¶</a></dt>
<dd><p>Energy of particles on circular orbits.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.pot">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">pot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">p</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#pot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.pot" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the potential in the midplane - can be expensive</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.omega">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">omega</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">p</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#omega"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.omega" title="Permalink to this definition">¶</a></dt>
<dd><p>Circular frequency Omega = v_circ/radius (see Binney &amp; Tremaine Sect. 3.2)</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.kappa">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">kappa</code><span class="sig-paren">(</span><em class="sig-param">R dOmega^2/dR + 4 Omega^2) (see Binney &amp; Tremaine Sect. 3.2</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#kappa"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.kappa" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.beta">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">beta</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">p</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#beta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.beta" title="Permalink to this definition">¶</a></dt>
<dd><p>3D Anisotropy parameter as defined in Binney and Tremiane</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.magnitudes">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">magnitudes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">band</span><span class="o">=</span><span class="default_value">'v'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#magnitudes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.magnitudes" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate magnitudes in each bin</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.Q">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">Q</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#Q"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.Q" title="Permalink to this definition">¶</a></dt>
<dd><p>Toomre Q parameter</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.X">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">X</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#X"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.X" title="Permalink to this definition">¶</a></dt>
<dd><p>X parameter defined as kappa^2*R/(2*pi*G*sigma*m) 
See Binney &amp; Tremaine 2008, eq. 6.77</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.jtot">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">jtot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#jtot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.jtot" title="Permalink to this definition">¶</a></dt>
<dd><p>Magnitude of the total angular momentum</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.j_theta">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">j_theta</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#j_theta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.j_theta" title="Permalink to this definition">¶</a></dt>
<dd><p>Angle that the angular momentum vector of the bin makes with respect to the xy-plane.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.profile.j_phi">
<code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">j_phi</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#j_phi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.j_phi" title="Permalink to this definition">¶</a></dt>
<dd><p>Angle that the angular momentum vector of the bin makes with the x-axis in the xy plane.</p>
</dd></dl>

<dl class="py class">
<dt id="pynbody.analysis.profile.InclinedProfile">
<em class="property">class </em><code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">InclinedProfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">angle</span></em>, <em class="sig-param"><span class="n">load_from_file</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ndim</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">type</span><span class="o">=</span><span class="default_value">'lin'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#InclinedProfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.InclinedProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a profile object to be used with a snapshot inclined by
some known angle to the xy plane.</p>
<p>In addition to the SimSnap object, it also requires the angle to
initialize.</p>
<p><strong>Example:</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">pynbody</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;sim&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pynbody</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">angmom</span><span class="o">.</span><span class="n">faceon</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">rotate_x</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">pynbody</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">InclinedProfile</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_particle_array</span></code>(profile_name[, …])</p></td>
<td><p>Create a particle array with the results of the profile calculation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">derivable_keys</span></code>()</p></td>
<td><p>Returns a list of possible profiles</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">families</span></code>()</p></td>
<td><p>Returns the family of particles used</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">keys</span></code>()</p></td>
<td><p>Returns a listing of available profile types</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">write</span></code>()</p></td>
<td><p>Writes all the vital information of the profile to a file.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 67%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>profile_property</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py class">
<dt id="pynbody.analysis.profile.VerticalProfile">
<em class="property">class </em><code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">VerticalProfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">rmin</span></em>, <em class="sig-param"><span class="n">rmax</span></em>, <em class="sig-param"><span class="n">zmax</span></em>, <em class="sig-param"><span class="n">load_from_file</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ndim</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">type</span><span class="o">=</span><span class="default_value">'lin'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#VerticalProfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.VerticalProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a profile object that uses the absolute value of the z-coordinate for binning.</p>
<p><strong>Input</strong>:</p>
<p><em>sim</em>: snapshot to make a profile from</p>
<p><em>rmin</em>: minimum radius for particle selection in kpc</p>
<p><em>rmax</em>: maximum radius for particle selection in kpc</p>
<p><em>zmax</em>: maximum height to consider in kpc</p>
<p><strong>Optional Keywords</strong>:</p>
<dl class="simple">
<dt><em>ndim</em>: if ndim=2, an edge-on projected profile is produced,</dt><dd><p>i.e. density is in units of mass/pc^2. If ndim=3 a volume
profile is made, i.e. density is in units of mass/pc^3.</p>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_particle_array</span></code>(profile_name[, …])</p></td>
<td><p>Create a particle array with the results of the profile calculation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">derivable_keys</span></code>()</p></td>
<td><p>Returns a list of possible profiles</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">families</span></code>()</p></td>
<td><p>Returns the family of particles used</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">keys</span></code>()</p></td>
<td><p>Returns a listing of available profile types</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">write</span></code>()</p></td>
<td><p>Writes all the vital information of the profile to a file.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 67%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>profile_property</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py class">
<dt id="pynbody.analysis.profile.QuantileProfile">
<em class="property">class </em><code class="sig-prename descclassname">pynbody.analysis.profile.</code><code class="sig-name descname">QuantileProfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">q</span><span class="o">=</span><span class="default_value">0.16, 0.5, 0.84</span></em>, <em class="sig-param"><span class="n">weights</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">load_from_file</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ndim</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">type</span><span class="o">=</span><span class="default_value">'lin'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/profile.html#QuantileProfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.profile.QuantileProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a profile object that returns the requested quantiles
for a given array in a given bin.  The quantiles may be mass weighted.</p>
<p><strong>Input</strong>:</p>
<p><em>sim</em>: snapshot to make a profile from</p>
<dl class="simple">
<dt><em>q (default: (0.16,0.5,0.84))</em>: </dt><dd><p>The quantiles that will be returned.
Default is median with 1-sigma on either side.
q can be of arbitrary length allowing the user to select
any quantiles they desire.</p>
</dd>
<dt><em>weights (default:None)</em>:  </dt><dd><p>What should be used to weight the quantile.  You will usually
want to use particle mass: sim[‘mass’].  
The default is to not weight by anything, weights=None.</p>
</dd>
</dl>
<p><strong>Optional Keywords</strong>:</p>
<dl class="simple">
<dt><em>ndim</em>: if ndim=2, an edge-on projected profile is produced,</dt><dd><p>i.e. density is in units of mass/pc^2. If ndim=3 a volume
profile is made, i.e. density is in units of mass/pc^3.</p>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_particle_array</span></code>(profile_name[, …])</p></td>
<td><p>Create a particle array with the results of the profile calculation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">derivable_keys</span></code>()</p></td>
<td><p>Returns a list of possible profiles</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">families</span></code>()</p></td>
<td><p>Returns the family of particles used</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">keys</span></code>()</p></td>
<td><p>Returns a listing of available profile types</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">write</span></code>()</p></td>
<td><p>Writes all the vital information of the profile to a file.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 67%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>profile_property</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<span class="target" id="module-pynbody.analysis.ramses_util"></span><div class="section" id="ramses-util">
<h2>ramses_util<a class="headerlink" href="#ramses-util" title="Permalink to this headline">¶</a></h2>
<p>Handy utilities for using RAMSES outputs in pynbody. For a complete
demo on how to use RAMSES outputs with pynbody, have a look at the
<a class="reference external" href="http://nbviewer.ipython.org/github/pynbody/pynbody/blob/master/examples/notebooks/pynbody_demo-ramses.ipynb">ipython notebook demo</a></p>
<div class="section" id="file-conversion">
<h3>File Conversion<a class="headerlink" href="#file-conversion" title="Permalink to this headline">¶</a></h3>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pynbody</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">ramses_util</span><span class="o">.</span><span class="n">convert_to_tipsy_fullbox</span><span class="p">(</span><span class="s1">&#39;output_00101&#39;</span><span class="p">)</span> <span class="c1"># will convert the whole output</span>
</pre></div>
</div>
<p>Now you can run AHF or pkdgrav using the file named
<cite>output_00101_fullbox.tipsy</cite> as an input or</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s_tipsy</span> <span class="o">=</span> <span class="n">pynbody</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;output_00101_fullbox.tipsy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also just output a part of the simulation :</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">pynbody</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">ramses_util</span><span class="o">.</span><span class="n">load_center</span><span class="p">(</span><span class="s1">&#39;output_00101&#39;</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># centered on halo 0 </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pynbody</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">ramses_util</span><span class="o">.</span><span class="n">convert_to_tipsy_simple</span><span class="p">(</span><span class="s1">&#39;output_00101&#39;</span><span class="p">,</span> <span class="n">file</span> <span class="o">=</span> <span class="n">pynbody</span><span class="o">.</span><span class="n">filt</span><span class="o">.</span><span class="n">Sphere</span><span class="p">(</span><span class="s1">&#39;200 kpc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we’ve got a file called <cite>output_00101.tipsy</cite> which holds only the
200 kpc sphere centered on halo 0.</p>
</div>
<div class="section" id="generating-tform">
<h3>Generating tform<a class="headerlink" href="#generating-tform" title="Permalink to this headline">¶</a></h3>
<p>A problem with RAMSES outputs in pynbody is that the <cite>tform</cite> array is
in funny units that aren’t easily usable. To generate a new <cite>tform</cite>
array (in Gyr) you can use the <a class="reference internal" href="#pynbody.analysis.ramses_util.get_tform" title="pynbody.analysis.ramses_util.get_tform"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_tform()</span></code></a> defined here. It’s
very easy:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">pynbody</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;output_00101&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pynbody</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">ramses_util</span><span class="o">.</span><span class="n">get_tform</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>This now generated a directory called <cite>birth</cite> in the parent directory
of your output. It then calls the routine <cite>part2birth</cite> located in the
RAMSES utils (see the <a class="reference external" href="https://bitbucket.org/rteyssie/ramses">bitbucket repository</a>. <a class="reference internal" href="#pynbody.analysis.ramses_util.get_tform" title="pynbody.analysis.ramses_util.get_tform"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_tform()</span></code></a> also
deletes the previous <cite>tform</cite> array (not from disk, just from the
currently loaded snapshot). The next time you call <a class="reference internal" href="#pynbody.analysis.ramses_util.get_tform" title="pynbody.analysis.ramses_util.get_tform"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_tform()</span></code></a>,
the data will be loaded from the disk and <cite>part2birth</cite> won’t need to
be run again.</p>
<p>Feb 2016 - RS
Note that in this version of ramses_util I have moved the ‘birth’ files
into the output directory to which they pertain. The old code wasn’t
placing them in a subdir of ‘birth’ in the top output and since I had
to fix it I thought it better not to have a single directory with
potentially 1000’s of files for all RAMSES outputs. The get_tform
routine now creates the files under the approrpiate “<a href="#id15"><span class="problematic" id="id16">output_</span></a>” dir
and reads them back from there.</p>
<dl class="py function">
<dt id="pynbody.analysis.ramses_util.convert_to_tipsy_simple">
<code class="sig-prename descclassname">pynbody.analysis.ramses_util.</code><code class="sig-name descname">convert_to_tipsy_simple</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">output</span></em>, <em class="sig-param"><span class="n">halo</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">filt</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/ramses_util.html#convert_to_tipsy_simple"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.ramses_util.convert_to_tipsy_simple" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert RAMSES output to tipsy format readable by
e.g. pkdgrav. This is a quick and dirty conversion, meant to be
used for quick visualization or other simple post
processing. Importantly, none of the cosmologically-relevant
information is carried forward. For a more complete conversion for
e.g. running through pkdgrav or Amiga Halo Finder, see
<a class="reference internal" href="#pynbody.analysis.ramses_util.convert_to_tipsy_fullbox" title="pynbody.analysis.ramses_util.convert_to_tipsy_fullbox"><code class="xref py py-func docutils literal notranslate"><span class="pre">convert_to_tipsy_fullbox()</span></code></a>.</p>
<p>The snapshot is put into units where G=1, time unit = 1 Gyr and
mass unit = 2.222286e5 Msol.</p>
<p><strong>Input</strong>:</p>
<p><em>output</em> : path to RAMSES output directory</p>
<p><strong>Optional Keywords</strong>:</p>
<p><em>filt</em> : a filter to apply to the box before writing out the tipsy file</p>
<p><em>halo</em> : which hop halo to center on – default = 0</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.ramses_util.get_tipsy_units">
<code class="sig-prename descclassname">pynbody.analysis.ramses_util.</code><code class="sig-name descname">get_tipsy_units</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/ramses_util.html#get_tipsy_units"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.ramses_util.get_tipsy_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns snapshot <cite>sim</cite> units in the pkdgrav/gasoline unit
system.  This is probably not a function to be called by users,
but it is used instead by other routines for file conversion.</p>
<p><strong>Input</strong>:</p>
<p><em>sim</em>: RAMSES simulation snapshot</p>
<p><strong>Return values</strong>:</p>
<p><em>lenunit, massunit, timeunit</em> : tuple specifying the units in kpc, Msol, and Gyr</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.ramses_util.convert_to_tipsy_fullbox">
<code class="sig-prename descclassname">pynbody.analysis.ramses_util.</code><code class="sig-name descname">convert_to_tipsy_fullbox</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">output</span></em>, <em class="sig-param"><span class="n">write_param</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/ramses_util.html#convert_to_tipsy_fullbox"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.ramses_util.convert_to_tipsy_fullbox" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert RAMSES file <cite>output</cite> to tipsy format readable by pkdgrav
and Amiga Halo Finder. Does all unit conversions etc. into the
pkdgrav unit system. Creates a file called <cite>output_fullbox.tipsy</cite>.</p>
<p><strong>Input</strong>:</p>
<p><em>output</em>: name of RAMSES output</p>
<p><strong>Optional Keywords</strong>:</p>
<p><em>write_param</em>: whether or not to write the parameter file (default = True)</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.ramses_util.write_tipsy_param">
<code class="sig-prename descclassname">pynbody.analysis.ramses_util.</code><code class="sig-name descname">write_tipsy_param</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">tipsyfile</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/ramses_util.html#write_tipsy_param"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.ramses_util.write_tipsy_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a pkdgrav-readable parameter file for RAMSES snapshot
<cite>sim</cite> with the prefix <cite>filename</cite></p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.ramses_util.write_ahf_input">
<code class="sig-prename descclassname">pynbody.analysis.ramses_util.</code><code class="sig-name descname">write_ahf_input</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">tipsyfile</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/ramses_util.html#write_ahf_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.ramses_util.write_ahf_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Write an input file that can be used by the <a class="reference external" href="http://popia.ft.uam.es/AHF/Download.html">Amiga Halo Finder</a> with the
corresponding <cite>tipsyfile</cite> which is the <cite>sim</cite> in tipsy format.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.ramses_util.get_tform">
<code class="sig-prename descclassname">pynbody.analysis.ramses_util.</code><code class="sig-name descname">get_tform</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sim</span></em>, <em class="sig-param"><span class="n">part2birth_path</span><span class="o">=</span><span class="default_value">'$HOME/ramses/utils/f90/part2birth'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/ramses_util.html#get_tform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.ramses_util.get_tform" title="Permalink to this definition">¶</a></dt>
<dd><p>Use <cite>part2birth</cite> to calculate the formation time of stars in
Gyr and <strong>replaces</strong> the original <cite>tform</cite> array.</p>
<p><strong>Input</strong>:</p>
<p><em>sim</em>: RAMSES snapshot</p>
<p><strong>Optional Keywords:</strong></p>
<dl class="simple">
<dt><em>part2birth_path:</em> by default, this is</dt><dd><p>$HOME/ramses/utils/f90/part2birth, as specified in
<cite>default_config.ini</cite> in your pynbody install directory. You can
override this like so – make a file called “.pynbodyrc” in your
home directory, and include</p>
</dd>
</dl>
<p>[ramses]</p>
<p>ramses_utils = /path/to/your/ramses/utils/directory</p>
</dd></dl>

</div>
</div>
<span class="target" id="module-pynbody.analysis.interpolate"></span><div class="section" id="interpolate">
<h2>interpolate<a class="headerlink" href="#interpolate" title="Permalink to this headline">¶</a></h2>
<p>2D and 3D Interpolation routines written in cython</p>
<dl class="py function">
<dt id="pynbody.analysis.interpolate.interpolate3d">
<code class="sig-prename descclassname">pynbody.analysis.interpolate.</code><code class="sig-name descname">interpolate3d</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">z</span></em>, <em class="sig-param"><span class="n">x_vals</span></em>, <em class="sig-param"><span class="n">y_vals</span></em>, <em class="sig-param"><span class="n">z_vals</span></em>, <em class="sig-param"><span class="n">vals</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/interpolate.html#interpolate3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.interpolate.interpolate3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate on a 3D regular grid. 
Yields results identical to scipy.interpolate.interpn.</p>
</dd></dl>

<dl class="py function">
<dt id="pynbody.analysis.interpolate.interpolate2d">
<code class="sig-prename descclassname">pynbody.analysis.interpolate.</code><code class="sig-name descname">interpolate2d</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">x_vals</span></em>, <em class="sig-param"><span class="n">y_vals</span></em>, <em class="sig-param"><span class="n">vals</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pynbody/analysis/interpolate.html#interpolate2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pynbody.analysis.interpolate.interpolate2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate on a 2D regular grid. 
Yields results identical to scipy.interpolate.interpn.</p>
</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo.svg" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials.html">Tutorials &amp; walkthroughs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Pynbody reference documentation</a><ul>
      <li>Previous: <a href="derived.html" title="previous chapter">Automatically Derived Arrays</a></li>
      <li>Next: <a href="plot.html" title="next chapter">Plotting</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2011-20, pynbody team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/reference/analysis.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>